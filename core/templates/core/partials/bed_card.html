<li class="list-group-item p-2 d-flex justify-content-between align-items-center" id="bed-{{ bed.id }}">

    <div style="width: 40px; font-size: 1.1em;" class="fw-bold text-secondary border-end me-2 text-center">
        {{ bed.name }}
    </div>

    <div class="flex-grow-1 lh-sm">
        {% if res %}
            <div class="fw-bold text-dark d-flex align-items-center gap-2">
                {{ res.guest.name }}
            </div>

            <div class="small mt-1 d-flex align-items-center flex-wrap gap-2 text-muted">
                <span title="Empresa"><i class="bi bi-briefcase-fill me-1"></i>{{ res.guest.company }}</span>

                {% if res.has_luggage %}
                    <span class="badge bg-warning text-dark" title="Mala Guardada">
                        <i class="bi bi-briefcase-fill"></i> Mala
                    </span>
                {% endif %}

                {% if res.status == 'PRE' %}
                    <span class="badge bg-warning text-dark border border-warning">Pré-reserva</span>
                {% endif %}
            </div>
        {% else %}
            <span class="text-muted small opacity-50">
                Livre
            </span>
        {% endif %}
    </div>

    {% if res %}
    <div class="btn-group btn-group-sm" role="group">

        {% if res.status == 'PRE' %}
            <button type="button"
                    class="btn btn-success"
                    hx-get="{% url 'edit_checkin_modal' res.id %}"
                    hx-target="#modal-content"
                    data-bs-toggle="modal" data-bs-target="#mainModal"
                    title="Confirmar Check-in">
                <i class="bi bi-check-lg"></i>
            </button>

            <button type="button"
                    class="btn btn-outline-primary"
                    hx-get="{% url 'change_room_modal' res.id %}"
                    hx-target="#modal-content"
                    data-bs-toggle="modal" data-bs-target="#mainModal"
                    title="Mudar Quarto">
                <i class="bi bi-arrow-left-right"></i>
            </button>

            <button type="button"
                    class="btn btn-outline-danger"
                    hx-post="{% url 'cancel_reservation' res.id %}"
                    hx-target="#room-card-{{ bed.room.id }}"
                    hx-swap="outerHTML"
                    hx-confirm="Tem certeza? Isso vai apagar a pré-reserva e liberar a vaga."
                    title="Cancelar e Liberar">
                <i class="bi bi-trash"></i>
            </button>

        {% else %}
            <button type="button"
                    class="btn {% if res.has_luggage %}btn-warning{% else %}btn-outline-secondary{% endif %}"
                    hx-post="{% url 'toggle_luggage' res.id %}"
                    hx-target="#bed-{{ bed.id }}"
                    hx-swap="outerHTML"
                    title="Guardar/Retirar Mala">
                <i class="bi bi-briefcase-fill fs-6"></i>
            </button>

            <button type="button"
                    class="btn btn-outline-primary"
                    hx-get="{% url 'change_room_modal' res.id %}"
                    hx-target="#modal-content"
                    data-bs-toggle="modal" data-bs-target="#mainModal"
                    title="Mudar Quarto">
                <i class="bi bi-arrow-left-right fs-6"></i>
            </button>

            <button type="button"
                    class="btn btn-outline-danger"
                    hx-post="{% url 'checkout' res.id %}"
                    hx-target="#room-card-{{ bed.room.id }}"
                    hx-swap="outerHTML"
                    hx-confirm="Confirmar saída de {{ res.guest.name }}?"
                    title="Checkout">
                <i class="bi bi-box-arrow-right fs-6"></i>
            </button>
        {% endif %}

    </div>
    {% else %}
         <button class="btn btn-sm btn-outline-success"
            hx-get="{% url 'new_reservation_modal' %}"
            hx-target="#modal-content"
            data-bs-toggle="modal"
            data-bs-target="#mainModal"
            title="Reservar">
            <i class="bi bi-plus-lg"></i>
         </button>
    {% endif %}
</li>